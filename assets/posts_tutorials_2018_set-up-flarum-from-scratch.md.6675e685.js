import{_ as a,c as e,o as n,a as s}from"./app.7001bd85.js";const m='{"title":"Set Up Flarum From Scratch","description":"","frontmatter":{"title":"Set Up Flarum From Scratch","date":"2018-01-06T14:37:18.000Z","tags":["web","flarum","linux","tutorial"],"author":"dyzdyz010","collection":"tutorials"},"headers":[{"level":2,"title":"1. Get a VPS from Linode/Vultr/whatever","slug":"_1-get-a-vps-from-linode-vultr-whatever"},{"level":2,"title":"2. Pick a linux distribution and make it running(I use CentOS 7).","slug":"_2-pick-a-linux-distribution-and-make-it-running-i-use-centos-7"},{"level":2,"title":"3. Install Apache/MySQL/PHP 7.1","slug":"_3-install-apache-mysql-php-7-1"},{"level":3,"title":"Get yourself a non-root sudo user","slug":"get-yourself-a-non-root-sudo-user"},{"level":3,"title":"Install and configure Apache","slug":"install-and-configure-apache"},{"level":3,"title":"Install MySQL","slug":"install-mysql"},{"level":3,"title":"Install and configure PHP","slug":"install-and-configure-php"},{"level":2,"title":"4. Install Flarum","slug":"_4-install-flarum"},{"level":3,"title":"Create site directory","slug":"create-site-directory"},{"level":3,"title":"Install composer","slug":"install-composer"},{"level":3,"title":"Fetch flarum content","slug":"fetch-flarum-content"},{"level":3,"title":"Adjust ownership and permissions","slug":"adjust-ownership-and-permissions"},{"level":2,"title":"5. Make it up and running","slug":"_5-make-it-up-and-running"},{"level":3,"title":"Create virtual host in apache for flarum","slug":"create-virtual-host-in-apache-for-flarum"},{"level":3,"title":"Configure firewalld and restart Apache server","slug":"configure-firewalld-and-restart-apache-server"},{"level":2,"title":"6. Visit your flarum site and enjoy!","slug":"_6-visit-your-flarum-site-and-enjoy"},{"level":3,"title":"Note:Wrote this down based on my memory, if there are any missing pieces, post a comment below \u{1F603}","slug":"note-wrote-this-down-based-on-my-memory-if-there-are-any-missing-pieces-post-a-comment-below-\u{1F603}"}],"relativePath":"posts/tutorials/2018/set-up-flarum-from-scratch.md"}',t={},r=s(`<p><a href="https://flarum.org/docs/install.html" target="_blank" rel="noopener noreferrer">Befor you continue</a></p><h2 id="_1-get-a-vps-from-linode-vultr-whatever" tabindex="-1">1. Get a VPS from Linode/Vultr/whatever <a class="header-anchor" href="#_1-get-a-vps-from-linode-vultr-whatever" aria-hidden="true">#</a></h2><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fn61zqmlx2j30a208sq3e.jpg" alt=""></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fn6207rsfhj309c0360sq.jpg" alt=""></p><h2 id="_2-pick-a-linux-distribution-and-make-it-running-i-use-centos-7" tabindex="-1">2. Pick a linux distribution and make it running(I use CentOS 7). <a class="header-anchor" href="#_2-pick-a-linux-distribution-and-make-it-running-i-use-centos-7" aria-hidden="true">#</a></h2><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fn628gjiafj31ie0fwjto.jpg" alt=""></p><h2 id="_3-install-apache-mysql-php-7-1" tabindex="-1">3. Install Apache/MySQL/PHP 7.1 <a class="header-anchor" href="#_3-install-apache-mysql-php-7-1" aria-hidden="true">#</a></h2><h3 id="get-yourself-a-non-root-sudo-user" tabindex="-1">Get yourself a non-root sudo user <a class="header-anchor" href="#get-yourself-a-non-root-sudo-user" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code>adduser USERNAME
<span class="token function">passwd</span> USERNAME
<span class="token function">usermod</span> <span class="token parameter variable">-aG</span> wheel USERNAME
<span class="token function">su</span> USERNAME
</code></pre></div><h3 id="install-and-configure-apache" tabindex="-1">Install and configure Apache <a class="header-anchor" href="#install-and-configure-apache" aria-hidden="true">#</a></h3><p><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-centos-7" target="_blank" rel="noopener noreferrer">Check this out</a></p><p>First install it.</p><div class="language-bash"><pre><code><span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token parameter variable">-y</span> <span class="token function">install</span> httpd
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> httpd.service
</code></pre></div><p>Then create directory structure.</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /etc/httpd/sites-available
<span class="token function">sudo</span> <span class="token function">mkdir</span> /etc/httpd/sites-enabled
</code></pre></div><p>Open config file:</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/httpd/conf/httpd.conf
</code></pre></div><p>Add this to the end of the file:</p><div class="language-conf"><pre><code>IncludeOptional sites-enabled/*.conf
</code></pre></div><h3 id="install-mysql" tabindex="-1">Install MySQL <a class="header-anchor" href="#install-mysql" aria-hidden="true">#</a></h3><p>CentOS 7 by default uses <code>MariaDB</code> rather than MySQL, but there&#39;s no difference using it.</p><p><strong>Note:</strong> yum installs MariaDB 5.5 by default, which no longer satisfies flarum&#39;s requirements. <a href="https://mariadb.com/resources/blog/installing-mariadb-10-on-centos-7-rhel-7/" target="_blank" rel="noopener noreferrer">See here</a> for instructions on installing MariaDB 10.</p><div class="language-bash"><pre><code><span class="token function">sudo</span> mysql_secure_installation
</code></pre></div><p>Then create a <code>user</code> and a <code>database</code> in <code>MySQL</code> for flarum.</p><h3 id="install-and-configure-php" tabindex="-1">Install and configure PHP <a class="header-anchor" href="#install-and-configure-php" aria-hidden="true">#</a></h3><p>I&#39;m using php 7.1 here.</p><p><a href="https://webtatic.com/packages/php70/" target="_blank" rel="noopener noreferrer">Take a look at this</a></p><p>First add needed yum repo:</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
</code></pre></div><p>Install php</p><div class="language-bash"><pre><code><span class="token function">sudo</span> yum <span class="token function">install</span> mod_php71w php71w-cli php71w-xml php71w-mbstring php71w-mysql php71w-gd
</code></pre></div><h2 id="_4-install-flarum" tabindex="-1">4. Install Flarum <a class="header-anchor" href="#_4-install-flarum" aria-hidden="true">#</a></h2><h3 id="create-site-directory" tabindex="-1">Create site directory <a class="header-anchor" href="#create-site-directory" aria-hidden="true">#</a></h3><p>Name your site directory whatever you like, I&#39;ll just stick with <code>flarum</code>.</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www/flarum
</code></pre></div><h3 id="install-composer" tabindex="-1">Install composer <a class="header-anchor" href="#install-composer" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> /tmp
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-sS</span> https://getcomposer.org/installer <span class="token operator">|</span> php
<span class="token function">sudo</span> <span class="token function">mv</span> composer.phar /usr/local/bin/composer
</code></pre></div><h3 id="fetch-flarum-content" tabindex="-1">Fetch flarum content <a class="header-anchor" href="#fetch-flarum-content" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> /var/www
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token function">unzip</span>
<span class="token function">sudo</span> <span class="token function">chown</span> USERNAME:GROUPNAME flarum
<span class="token builtin class-name">cd</span> flarum
<span class="token function">composer</span> create-project flarum/flarum <span class="token builtin class-name">.</span> <span class="token parameter variable">--stability</span><span class="token operator">=</span>beta
</code></pre></div><h3 id="adjust-ownership-and-permissions" tabindex="-1">Adjust ownership and permissions <a class="header-anchor" href="#adjust-ownership-and-permissions" aria-hidden="true">#</a></h3><p>Change directory&#39;s ower to <code>apache</code> for apache to operate:</p><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> apache:apache flarum
</code></pre></div><h2 id="_5-make-it-up-and-running" tabindex="-1">5. Make it up and running <a class="header-anchor" href="#_5-make-it-up-and-running" aria-hidden="true">#</a></h2><h3 id="create-virtual-host-in-apache-for-flarum" tabindex="-1">Create virtual host in apache for flarum <a class="header-anchor" href="#create-virtual-host-in-apache-for-flarum" aria-hidden="true">#</a></h3><p>Name configuration file whatever you like:</p><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> /etc/httpd/sites-available
<span class="token function">sudo</span> <span class="token function">vim</span> flarum.conf
</code></pre></div><p>Fill in content below(<strong>Don&#39;t forget the url rewrite block!</strong>):</p><div class="language-conf"><pre><code>&lt;VirtualHost *:80&gt;
    ServerName YOURDOMAIN
    ServerAlias ALIAS
    DocumentRoot /var/www/flarum/public
    ErrorLog /var/www/flarum/storage/logs/error.log
    CustomLog /var/www/flarum/storage/logs/requests.log combined

    &lt;Directory &quot;/var/www/flarum/public&quot;&gt;
        DirectoryIndex index.php
        AllowOverride All
        allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre></div><p>Make your config go live</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /etc/httpd/sites-available/flarum.conf /etc/httpd/sites-enabled/flarum.conf
</code></pre></div><h3 id="configure-firewalld-and-restart-apache-server" tabindex="-1">Configure firewalld and restart Apache server <a class="header-anchor" href="#configure-firewalld-and-restart-apache-server" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">sudo</span> firewall-cmd --add-service<span class="token operator">=</span>http <span class="token parameter variable">--permanent</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> firewall-cmd --add-service<span class="token operator">=</span>https <span class="token parameter variable">--permanent</span>
<span class="token function">sudo</span> systemctl restart firewalld
<span class="token function">sudo</span> apachectl restart
</code></pre></div><h2 id="_6-visit-your-flarum-site-and-enjoy" tabindex="-1">6. Visit your flarum site and enjoy! <a class="header-anchor" href="#_6-visit-your-flarum-site-and-enjoy" aria-hidden="true">#</a></h2><h3 id="note-wrote-this-down-based-on-my-memory-if-there-are-any-missing-pieces-post-a-comment-below-\u{1F603}" tabindex="-1">Note:Wrote this down based on my memory, if there are any missing pieces, post a comment below \u{1F603} <a class="header-anchor" href="#note-wrote-this-down-based-on-my-memory-if-there-are-any-missing-pieces-post-a-comment-below-\u{1F603}" aria-hidden="true">#</a></h3>`,54),o=[r];function l(i,c,p,d,u,h){return n(),e("div",null,o)}var g=a(t,[["render",l]]);export{m as __pageData,g as default};
